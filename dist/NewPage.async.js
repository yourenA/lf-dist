webpackJsonp([0],{2029:function(e,t,a){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n,r,d=a(32),u=l(d),o=a(292),i=l(o),c=a(87),f=l(c),s=a(295),p=l(s),m=a(22),h=l(m),g=a(96),y=l(g),_=a(36),w=l(_),v=a(18),x=l(v),E=a(27),k=l(E),b=a(300),I=l(b),S=a(299),C=l(S),M=a(85),N=l(M),D=a(118),P=l(D),z=a(38),F=l(z),O=a(1),W=l(O),A=a(7),J=l(A),j=a(2),K=l(j),Q=a(5),T=l(Q),B=a(3),L=l(B),R=a(4),U=l(R),V=a(15),q=l(V),G=a(50),H=l(G);a(33),a(293),a(88),a(296),a(59),a(97),a(37),a(19),a(26),a(86),a(137),a(39),a(16),a(51);var X=a(0),Y=l(X),Z=a(11),$=a(17),ee=a(61),te=l(ee),ae=H.default.Option,le=q.default.Item,ne=(n=(0,Z.connect)(function(e){return{user_command_data:e.user_command_data}}))(r=function(e){function t(e){(0,K.default)(this,t);var a=(0,L.default)(this,(t.__proto__||(0,J.default)(t)).call(this,e));return a.setIntervalFetch=function(){a.handleSearch({page:1})},a.componentWillUnmount=function(){clearInterval(a.timer)},a.toggleAuto=function(){var e=a;a.setState({auto:!a.state.auto},function(){this.state.auto?(console.log("\u5f00\u542f\u81ea\u52a8\u5237\u65b0"),clearInterval(this.timer),e.handleSearch({page:1}),e.handleSearch2({page:1}),this.timer=setInterval(function(){e.handleSearch({page:1}),e.handleSearch2({page:1})},1e4)):(console.log("\u505c\u6b62\u81ea\u52a8\u5237\u65b0"),clearInterval(this.timer))})},a.handleSubmit=function(){a.props.form.validateFields(function(e,t){if(!e){console.log("Received values of form: ",t);var l=a;(0,a.props.dispatch)({type:"user_command_data/add",payload:(0,W.default)({},t,{feature:t.feature?t.feature.key:""}),callback:function(){F.default.success("\u53d1\u9001\u6307\u4ee4\u6210\u529f"),l.props.dispatch({type:"user_command_data/fetch",payload:{page:l.state.page}})}})}})},a.handPageChange=function(e){a.handleSearch({page:e})},a.handPageChange2=function(e){a.handleSearch2({page:e})},a.handleSearch=function(e){(0,a.props.dispatch)({type:"user_command_data/fetch",payload:(0,W.default)({},e)}),a.setState({page:e.page})},a.handleSearch2=function(e){(0,a.props.dispatch)({type:"user_command_data/fetchMeterDetail",payload:(0,W.default)({},e)}),a.setState({page2:e.page})},a.timer=null,a.state={auto:!1,page:1,page2:1,feature:[{key:"open_valve",value:"\u5f00\u9600"},{key:"close_valve",value:"\u5173\u9600"},{key:"read_single_901f",value:"901F\u70b9\u6284"},{key:"read_multiple_901f",value:"901F\u96c6\u6284"},{key:"upload_single_lora",value:"\u70b9\u6284"},{key:"runonce_upload_multiple_timing",value:"\u96c6\u6284"}]},a}return(0,U.default)(t,e),(0,T.default)(t,[{key:"componentDidMount",value:function(){var e=this.props.dispatch;e({type:"user_command_data/fetch",payload:{page:1}}),e({type:"user_command_data/fetchMeterDetail",payload:{page:1}})}},{key:"render",value:function(){for(var e=this,t={labelCol:{xs:{span:24},sm:{span:7}},wrapperCol:{xs:{span:24},sm:{span:17}}},a={wrapperCol:{xs:{span:24},sm:{offset:7,span:17}}},l=this.props.form.getFieldDecorator,n=this.props.user_command_data,r=n.data,d=n.meta,o=n.loading,c=n.dataMeterDetail,s=n.metaMeterDetail,m=n.loadingMeterDetail,g=n.command_msg,_=0;_<r.length;_++)r[_].uuidkey=(0,te.default)();for(var v=0;v<c.length;v++)c[v].uuidkey=(0,te.default)();for(var E=[{title:"\u5e8f\u53f7",dataIndex:"id",key:"id",width:50,fixed:"left",className:"table-index",render:function(e,t,a){return Y.default.createElement("span",null,a+1)}},{title:"\u96c6\u4e2d\u5668\u7f16\u53f7",width:100,dataIndex:"concentrator_number",key:"concentrator_number2",fixed:"left"},{title:"\u6c34\u8868\u53f7",width:90,dataIndex:"meter_number",key:"meter_number2",fixed:"left"},{title:"\u529f\u80fd\u4ee3\u7801",dataIndex:"feature",key:"feature",width:150,render:function(e,t,a){return Y.default.createElement(P.default,{placement:"topLeft",title:Y.default.createElement("p",{style:{width:"200px",wordWrap:"break-word"}},e)},Y.default.createElement("p",{style:{width:"130px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},e))}},{title:"\u72b6\u6001",dataIndex:"status",width:100,render:function(e,t,a){return Y.default.createElement("span",null,Y.default.createElement(N.default,{status:-1===e?"error":"success"}),t.status_explain)}},{title:"\u6267\u884c\u56de\u8c03\u7ed3\u679c",dataIndex:"result",key:"result",width:130},{title:"\u9644\u5e26\u53c2\u6570",dataIndex:"body",key:"body",width:150,render:function(e,t,a){return Y.default.createElement(P.default,{title:Y.default.createElement("p",{style:{width:"200px",wordWrap:"break-word"}},(0,C.default)(e))},Y.default.createElement("p",{style:{width:"130px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},(0,C.default)(e)))}},{title:"\u521b\u5efa\u65f6\u95f4",dataIndex:"created_at",key:"created_at"}],b=[{title:"\u5e8f\u53f7",dataIndex:"id",key:"id",width:50,fixed:"left",className:"table-index",render:function(t,a,l){return(0,$.renderIndex)(s,e.state.page,l)}},{title:"\u96c6\u4e2d\u5668\u7f16\u53f7",width:100,dataIndex:"concentrator_number",key:"concentrator_number2",fixed:"left"},{title:"\u6c34\u8868\u53f7",width:90,dataIndex:"meter_number",key:"meter_number2",fixed:"left"},{title:"\u8bfb\u6570(m\xb3)",width:80,dataIndex:"value",key:"value2"},{title:"\u4e0a\u4f20\u65f6\u95f4",dataIndex:"uploaded_at",key:"uploaded_at",width:150},{title:"\u91c7\u96c6\u65f6\u95f4",dataIndex:"collected_at",key:"collected_at"},{title:"\u5176\u5b83\u53c2\u6570",dataIndex:"body",key:"body",width:150,render:function(e,t,a){return Y.default.createElement(P.default,{arrowPointAtCenter:!0,title:Y.default.createElement("p",{style:{width:"200px",wordWrap:"break-word"}},(0,C.default)(e))},Y.default.createElement("p",{style:{width:"130px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},(0,C.default)(e)))}}],S=0,M=0;M<b.length;M++)b[M].width?S+=parseInt(b[M].width):S+=150;if(c.length>0){var D=(0,I.default)(c[0].body).sort(),z=c[0].body,F={};for(var O in D)F[D[O]]=z[D[O]];for(var A in z)!function(e){var t=parseInt(5*e.length+60);S+=t,b.push({title:""+e,dataIndex:""+e,key:""+e,width:t,render:function(a,l,n){return(0,$.ellipsis2)(l.body[e],t)}})}(A)}return console.log("1"),Y.default.createElement("div",null,Y.default.createElement(u.default,{type:"flex",justify:"center",align:"top",gutter:16},Y.default.createElement(y.default,{sm:12,md:8,lg:6},Y.default.createElement(w.default,{title:"\u6d4b\u8bd5"},Y.default.createElement(q.default,null,Y.default.createElement(le,(0,W.default)({},t,{label:Y.default.createElement("span",null,"\u96c6\u4e2d\u5668\u7f16\u53f7")}),l("concentrator_number",{})(Y.default.createElement(k.default,{placeholder:"\u96c6\u4e2d\u5668\u7f16\u53f7"}))),Y.default.createElement(le,(0,W.default)({},t,{label:Y.default.createElement("span",null,"\u6c34\u8868\u7f16\u53f7")}),l("meter_number",{})(Y.default.createElement(k.default,{placeholder:"\u6c34\u8868\u7f16\u53f7"}))),Y.default.createElement(le,(0,W.default)({},t,{label:Y.default.createElement("span",null,"\u6307\u4ee4")}),l("feature",{})(Y.default.createElement(H.default,{labelInValue:!0},this.state.feature.map(function(e,t){return Y.default.createElement(ae,{key:e.key,value:e.key},e.value)})))),Y.default.createElement(le,(0,W.default)({},t,{label:Y.default.createElement("span",null,"\u534f\u8bae")}),l("protocol",{})(Y.default.createElement(k.default,{placeholder:"\u534f\u8bae"}))),Y.default.createElement(le,a,Y.default.createElement(x.default,{style:{width:"100%"},type:"primary",onClick:this.handleSubmit},"\u53d1\u9001\u6307\u4ee4")),Y.default.createElement(le,a,(0,C.default)(g))))),Y.default.createElement(y.default,{sm:20,md:20,lg:16},Y.default.createElement(w.default,{title:"\u6d4b\u8bd5\u7ed3\u679c\u5217\u8868",extra:Y.default.createElement("div",null,Y.default.createElement(x.default,{type:"primary",onClick:this.toggleAuto},this.state.auto?"\u505c\u6b62\u81ea\u52a8\u5237\u65b0":"\u5f00\u542f\u81ea\u52a8\u5237\u65b0",Y.default.createElement(h.default,{type:"sync"}))," ",Y.default.createElement(p.default,{type:"vertical"}),Y.default.createElement(x.default,{disabled:this.state.auto,onClick:function(){e.handleSearch({page:1}),e.handleSearch2({page:1})}},"\u624b\u52a8\u5237\u65b0 ",Y.default.createElement(h.default,{type:"sync"})))},Y.default.createElement(f.default,{rowClassName:function(e,t){if(""===e.description)return"error"},className:"meter-table",loading:o,rowKey:function(e){return e.id},dataSource:r,columns:E,pagination:!1,scroll:{x:1e3,y:350},size:"small"}),Y.default.createElement(i.default,{showQuickJumper:!0,className:"pagination",total:d.pagination.total,current:d.pagination.current_page,pageSize:d.pagination.per_page,style:{marginTop:"10px",marginBottom:"10px"},onChange:this.handPageChange}),Y.default.createElement("div",{style:{clear:"both",zIndex:0,overflow:"hidden"}}),Y.default.createElement(f.default,{rowClassName:function(e,t){if(""===e.description)return"error"},className:"meter-table",loading:m,rowKey:function(e){return e.uuidkey},dataSource:c,columns:b,pagination:!1,scroll:{x:S,y:350},size:"small"}),Y.default.createElement(i.default,{showQuickJumper:!0,className:"pagination",total:s.pagination.total,current:s.pagination.current_page,pageSize:s.pagination.per_page,style:{marginTop:"10px"},onChange:this.handPageChange2})))),Y.default.createElement("style",null,"\n                            #root{\n                                background: #f9f9f9;\n                                overflow-x: hidden;\n                            }\n                        "))}}]),t}(X.PureComponent))||r,re=q.default.create()(ne);t.default=re,e.exports=t.default}});